{% extends "./base/base.html" %}
{% block title %}
    {{ manga.title }} - {{ chapter.title }} - Read Free Manga Chapters | MangaFoxy
{% endblock title %}
{% block meta_description %}
    {{ meta_description }}
{% endblock meta_description %}
{% block meta_keywords %}
    {{ meta_keywords }}
{% endblock meta_keywords %}
{% block content %}
    {% comment %} <h1 class="card-title text-xl sm:text-2xl font-bold text-base-content">{{ manga.title }} - {{ chapter.title }}</h1> {% endcomment %}
    <nav aria-label="Breadcrumb"
         class="text-sm breadcrumbs mb-4"
         itemscope
         itemtype="https://schema.org/BreadcrumbList">
        <ol class="list-reset flex space-x-2">
            <li itemprop="itemListElement"
                itemscope
                itemtype="https://schema.org/ListItem">
                <a href="{% url 'home' %}" itemprop="item" class="link link-hover">
                    <span itemprop="name">Home</span>
                </a>
                <meta itemprop="position" content="1" />
            </li>
            <li itemprop="itemListElement"
                itemscope
                itemtype="https://schema.org/ListItem">
                <a href="{% url 'manga-detail' manga.slug %}"
                   itemprop="item"
                   class="link link-hover">
                    <span itemprop="name">{{ manga.title }}</span>
                </a>
                <meta itemprop="position" content="2" />
            </li>
            <li aria-current="page"
                itemprop="itemListElement"
                itemscope
                itemtype="https://schema.org/ListItem">
                <span itemprop="name">{{ chapter.title }}</span>
                <meta itemprop="position" content="3" />
            </li>
        </ol>
    </nav>

    <!-- Top Ad -->
    <div id="ezoic-pub-ad-placeholder-112"></div>
    <script>
        ezstandalone.cmd.push(function() {
            ezstandalone.showAds(112)
        });
    </script>

    <article itemscope itemtype="https://schema.org/ComicStory">
        <header class="text-center mb-6">
            <h1 class="text-2xl font-bold"
                itemprop="partOfSeries"
                itemscope
                itemtype="https://schema.org/ComicSeries">
                <span itemprop="name">{{ manga.title }}</span>
            </h1>
            <h2 class="text-lg text-secondary" itemprop="name">{{ chapter.title }}</h2>
            {% if chapter.subtitle %}<h3 class="text-md text-info">{{ chapter.subtitle }}</h3>{% endif %}
        </header>
        <div class="flex justify-between items-center mb-6">
            {% if prev_chapter %}
                <a href="{% url 'chapter_detail' manga.slug prev_chapter.slug %}"
                   class="btn btn-outline btn-sm">← Previous</a>
            {% else %}
                <button class="btn btn-sm btn-disabled">← Previous</button>
            {% endif %}
            {% if next_chapter %}
                <a href="{% url 'chapter_detail' manga.slug next_chapter.slug %}"
                   class="btn btn-outline btn-sm">Next →</a>
            {% else %}
                <button class="btn btn-sm btn-disabled">Next →</button>
            {% endif %}
        </div>

        <!-- Middle Ad -->
        <div id="ezoic-pub-ad-placeholder-113"></div>
        <script>
            ezstandalone.cmd.push(function() {
                ezstandalone.showAds(113)
            });
        </script>

        {% if chapter.image_urls %}
            <div class="flex flex-col gap-6">
                {% for img in chapter.image_urls %}
                    <div class="card shadow-md bg-base-100">
                        <figure>
                            <img src="{{ img }}"
                                 alt="Page {{ forloop.counter }} of {{ chapter.title }} from {{ manga.title }}"
                                 loading="lazy"
                                 class="w-full" />
                        </figure>
                    </div>
                    {% if forloop.counter|divisibleby:3 %}
                        <!-- In-content Ad -->
                        <div id="ezoic-pub-ad-placeholder-114"></div>
                        <script>
                            ezstandalone.cmd.push(function() {
                                ezstandalone.showAds(114)
                            });
                        </script>
                    {% endif %}
                {% endfor %}
            </div>
        {% else %}
            <p>No images available for this chapter.</p>
        {% endif %}

        <!-- Bottom Ad -->
        <div id="ezoic-pub-ad-placeholder-115"></div>
        <script>
            ezstandalone.cmd.push(function() {
                ezstandalone.showAds(115)
            });
        </script>

        <div class="flex justify-between items-center mt-10">
            {% if prev_chapter %}
                <a href="{% url 'chapter_detail' manga.slug prev_chapter.slug %}"
                   class="btn btn-outline btn-sm">← Previous</a>
            {% else %}
                <button class="btn btn-sm btn-disabled">← Previous</button>
            {% endif %}
            {% if next_chapter %}
                <a href="{% url 'chapter_detail' manga.slug next_chapter.slug %}"
                   class="btn btn-outline btn-sm">Next →</a>
            {% else %}
                <button class="btn btn-sm btn-disabled">Next →</button>
            {% endif %}
        </div>
    </article>
{% endblock content %}
